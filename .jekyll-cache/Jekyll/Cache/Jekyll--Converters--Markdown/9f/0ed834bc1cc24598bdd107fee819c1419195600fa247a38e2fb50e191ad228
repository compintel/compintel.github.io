I"â)<h1 id="introdu√ß√£o">Introdu√ß√£o</h1>

<p>Ao longo de nossas vidas somos obrigados a tomar uma s√©rie de decis√µes, algumas¬†f√°ceis e outras extremamente dif√≠ceis. Seja f√°cil ou dif√≠cil, para se fazer uma escolha, normalmente, temos alternativas a serem escolhidas de acordo com um conjunto de crit√©rios pr√© definidos. Um¬†exemplo simples pode ser escolher um carro para comprar. A maioria das pessoas leva em considera√ß√£o o pre√ßo, pot√™ncia do motor, reputa√ß√£o da montadora, conforto, etc. Esses, nada mais s√£o que nossos crit√©rios para escolher um carro e baseado neles, avaliamos nossas alternativas, que poderiam ser um HB20, um P√°lio ou um Corola, dependendo, √© claro, de quais os crit√©rios s√£o os mais importantes para cada pessoa.¬†Agora imagine uma decis√£o mais complexa de ser tomada, como por exemplo, onde investir uma certa quantidade de dinheiro. J√° imaginou um algoritmo que possa te auxiliar nessa decis√£o?</p>

<p>O algoritmo TOPSIS (em ingl√™s,¬†<em>Technique for Order Preference by Similarity to Ideal Solution</em>) foi desenvolvido por Hwang e Yoon <a href="#hwang">[3]</a> e √© uma t√©cnica de avalia√ß√£o de performances de alternativas atrav√©s da similaridade da mesma com uma solu√ß√£o ideal. De acordo com essa t√©cnica a melhor alternativa √© aquela mais pr√≥xima da solu√ß√£o ideal e mais distante da solu√ß√£o n√£o ideal. O TOPSIS √© muito utilizado para solucionar problemas de tomada de decis√£o da vida real, como nosso exemplo da escolha do carro. Al√©m disso, existem varia√ß√µes do algoritmo que utilizam l√≥gica¬†<em>fuzzy</em> <a href="#krohling">[4]</a> e l√≥gica¬†<em>fuzzy¬†intuicionista</em> <a href="#pacheco">[4]</a>, mas isso s√£o assuntos para um pr√≥ximo post.</p>

<h1 id="tomada-de-decis√£o-de-multi-crit√©rio">Tomada de decis√£o de multi-crit√©rio</h1>
<p>Problemas de tomada de decis√£o multi-crit√©rio (do ingl√™s, <em>multi-criteria decision making</em> - MCDM)¬†s√£o caracterizados por uma matriz de decis√£o, que √© composta de alternativas e¬†crit√©rios ponderados de acordo com o tomador de decis√£o em quest√£o.¬†M√©todos para solucionar problemas MCDM como¬†t√™m sido amplamente utilizados para selecionar a melhor¬†alternativa entre um n√∫mero finito de alternativas. Como exemplo de m√©todos, podemos citar¬†PROMETHEE <a href="#bellman">[1]</a>, TODIM <a href="#hwang">[2]</a> e o TOPSIS <a href="#gomes">[3]</a>, que ser√° o tema deste post.</p>

<p>Vamos considerar uma matriz \(D\), no qual consiste de alternativas e crit√©rios, descrita por:</p>

\[D = \begin{pmatrix}
 x_{11} &amp; \cdots &amp; x_{1n}\\ 
 \vdots &amp; \ddots &amp; \vdots \\ 
 x_{m1}&amp; \cdots &amp; x_{mn}
\end{pmatrix}

\tag{1}\]

<p>Na qual, as linhas da matriz \(D\) ser√£o alternativas, que chamaremos de \(A_{1}, A_{2} \cdots A_{m}\). Por outro lado, as colunas s√£o crit√©rios, que chamaremos de \(C_{1}, C_{2} \cdots C_{n}\). O valor \(x_{ij}\)  indica o <em>rating</em>, o desempenho, da alternativa \(A_{i}\) com respeito ao crit√©rio \(C_{j}\). Cada crit√©rio possui um determinado peso, definido pelo tomador de decis√£o em quest√£o (pode ser eu, voc√™, um amigo‚Ä¶), representado por \(W = (w_{1}, w_2, \cdots , w_n)\), sendo \(w_j\) um peso para o crit√©rio \(C_j\) satisfazendo \(\sum_{j=1}^n w_j = 1\). Obviamente, \(i = \{1, \cdots, m\}\) e \(j = \{1, \cdots, n\}\).</p>

<p>Em geral os crit√©rios s√£o classificados em dois tipos¬†(e isso √© muito importante). Crit√©rios de custo, quanto, menor o¬†<em>rating</em> dele melhor, e crit√©rios de benef√≠cio, quanto maior o¬†<em>rating</em> melhor. Voltando ao nosso exemplo da compra do carro, o pre√ßo √© um crit√©rio de custo, ou seja, quanto menor o pre√ßo, mais desej√°vel √© o carro. Por outro lado, o conforto √© um crit√©rio de benef√≠cio, ou seja, quanto maior, melhor.</p>

<p>A matriz \(D\), depois de preenchida, necessita ser normalizada em uma matriz \(R = [r_{ij}]_{m \times n}\), isso permite a compara√ß√£o entre todos os crit√©rios (imagine, o pre√ßo dos carros est√£o em um intervalo bem maior do que uma nota de 0 a 10 dada para o conforto, por exemplo).</p>

<p>Para normalizar basta fazer:</p>

\[r_{ij} = \frac{x_{ij}}{\sqrt{\sum_{i=1}^m x^2_{ij}}}
\tag{2}\]

<p>Por fim, ap√≥s a normaliza√ß√£o dos¬†<em>ratings</em>, os valores da matriz \(R\) devem ser ponderados pelo vetor \(W\), gerando uma nova matriz¬†\(P = [p_{ij}]_{m \times n}\), oriunda da seguinte multiplica√ß√£o:</p>

\[p_{ij} = w_j \times r_{ij}
\tag{3}\]

<h1 id="o-algoritmo-topsis">O algoritmo TOPSIS</h1>
<p>A seguir ser√£o definidos o passo a passo do algoritmo de tomada de decis√£o TOPSIS.</p>

<h2 id="passo-1">Passo 1</h2>

<p>Identificar a solu√ß√£o ideal positiva \(A^+\), para crit√©rios de benef√≠cio, e a solu√ß√£o ideal negativa \(A^-\), para crit√©rios de custo, como descrito a seguir:</p>

\[A^{+} = (p^{+}_{1}, p^{+}_{2}, \cdots , p^{+}_{n}) \\
A^{-} = (p^{-}_{1}, p^{-}_{2}, \cdots , p^{-}_{n})
\tag{4}\]

<p>Sendo:</p>

\[p_{j}^+ = \left\{\begin{matrix}
max_i (p_{ij}), \textrm{se o criterio √© de beneficio}
\\
min_i (p_{ij}), \textrm{se o criterio √© de custo}
\end{matrix}\right.
\\

p_{j}^- = \left\{\begin{matrix}
min_i (p_{ij}), \textrm{se o criterio √© de beneficio}
\\

max_i (p_{ij}), \textrm{se o criterio √© de custo}

\end{matrix}\right.

\tag{5}\]

<p>Em outras palavras, as equa√ß√µes acima escolhem os melhores desempenhos em cada crit√©rio, seja ele de custo (e nesse caso o melhor desempenho √© o menor valor) ou de benef√≠cio (no qual o melhor desempenho √© o maior valor), e monta os vetores¬†\(A^+\) e¬†\(A^-\), que nada mais s√£o do que os desempenhos para uma alternativa perfeita, ou seja, ter¬†<em>ratings</em> altos para os crit√©rios de benef√≠cios e baixo para os de custo.</p>

<p>Uma outra maneira de obter os vetores ideais, √© ao inv√©s de escolher os valores m√°ximos ou m√≠nimos da matriz \(P\), simplesmente √© atribu√≠do 1 ou 0 para criar a alternativa perfeita. Neste caso, no vetor ideal positivo¬†\(A^+\), os crit√©rios de benef√≠cios recebem valor 1 e de custo 0. J√° no vetor ideal negativo¬†\(A^-\), a l√≥gica inverte. Os crit√©rios de benef√≠cios recebem 0 e os de custo 1. Como alertei anteriormente, <strong>o conceito de custo e benef√≠cio √© essencial para o TOPSIS funcionar corretamente.</strong></p>

<h2 id="passo-2">Passo 2</h2>
<p>Calcular, para cada alternativa \(A_i\) a dist√¢ncia euclidiana de cada¬†<em>rating</em> para o vetor de solu√ß√µes positivas¬†\(A^+\) e para o vetor de solu√ß√µes ideias negativo¬†\(A^-\).</p>

\[d_{i}^{+} = \sqrt{\sum_{j=1}^{n} (d_{ij}^{+})^2}
\\
\\
d_{i}^{-} = \sqrt{\sum_{j=1}^{n} (d_{ij}^{-})^2}
\tag{6}\]

<p>Na qual, \(d_{i}^{+} = p_{j}^{+} - p_{ij}\) e \(d_{i}^{-} = p_{j}^{-} - p_{ij}\).</p>

<h2 id="passo-3">Passo 3</h2>

<p>Calculado as dist√¢ncias do passo anterior, o pr√≥ximo passo √© determinar a proximidade relativa \(\xi\). A ideia √© escolher como melhor alternativa aquela mais pr√≥xima da solu√ß√£o ideal positiva e mais distante da solu√ß√£o ideal negativa. Para isso, fazemos:</p>

\[\xi_i = \frac{d_{i}^{-}}{d_{i}^{+} + d_{i}^{-}}
\tag{7}\]

<h2 id="passo-4">Passo 4</h2>

<p>O √∫ltimo passo √© fazer o ranking das alternativas baseada nos vetor¬†\(\xi\). As melhores alternativas s√£o aquelas com os maiores valores de¬†\(\xi_i\) e devem ser escolhidas pois est√£o mais pr√≥ximas da ideal.</p>

<h1 id="c√≥digo-exemplo">C√≥digo exemplo</h1>
<p>Ao final deste post deixo linkado um c√≥digo em MATLAB de um exemplo fict√≠cio baseado no nosso exemplo dos carros. Suponhamos que temos as 3 alternativas listadas na introdu√ß√£o: P√°lio, HB20 e o Corola. Eles ser√£o avaliados em 4 crit√©rios: consumo (C), conforto (B), pre√ßo (C) e reputa√ß√£o da marca (B). Os pesos, que eu definir e cada tomador de decis√£o defini o seus pr√≥prios pesos, de cada crit√©rio, ou seja, o qu√£o importante o crit√©rio √© para mim, ser√£o: consumo 30%, conforto 5%, pre√ßo 60% e reputa√ß√£o da marca 5%. A avalia√ß√£o de cada carro, segundo os crit√©rios √© mostrado na matriz abaixo (cada alternativa e crit√©rio est√£o na mesma sequ√™ncia). O consumo esta em litros a cada 100km, o conforto de 0 a 10, o pre√ßo em reais e a reputa√ß√£o de 0 a 10. Obviamente os valores s√£o fict√≠cios!</p>

\[D = \begin{pmatrix}
15 &amp; 6 &amp; 25000 &amp; 7\\
12 &amp; 7 &amp; 35000 &amp; 7 \\
10 &amp; 9 &amp; 55000 &amp; 8
\end{pmatrix}
\tag{8}\]

<p>Nessa matriz √© executado o TOPSIS (perceba que √© importante a normaliza√ß√£o, pois os valores est√£o em intervalos bem diferentes) e o resultado do raking final √© mostrado na figura abaixo.</p>

<figure style="width: 490px; height: 450px;" class="align-center">
  
  <img src="http://0.0.0.0:4000/assets/img/posts/topsis/ranking.png" alt="" />

  <figcaption style="text-align: center;">
    Figura 1: Ranking com o resultado do TOPSIS para o problema em quest√£o
  </figcaption>

</figure>

<p>Os valores na lateral s√£o os obtidos por¬†\(\xi_i\). Observe, que segundo¬†os¬†<em>ratings</em> e seus respectivos pesos, que eu atribu√≠, o melhor carro para mim √© um P√°lio (e realmente eu tenho um p√°lio rs). Se os valores dos pesos forem alterados o ranking pode sofrer altera√ß√µes. Experimente fazer isso!</p>

<p>Para acessar o c√≥digo deste exemplo, <a href="https://github.com/compintel/exemplo-topsis-matlab">clique aqui</a>. Al√©m disso, deixo linkado um <a href="https://github.com/paaatcha/Decision-Making">c√≥digo em Python para o TOPSIS</a>. Neste mesmo reposit√≥rio, existe o c√≥digo para outro algoritmo de tomada de decis√£o, o TODIM, que certamente ser√° t√≥pico de outro post no futuro.</p>

<p>Por hoje √© s√≥ pessoal!</p>

<h1 id="refer√™ncias">Refer√™ncias</h1>
<p><a name="bellman">[1]</a> R.E. Bellman, L.A. Zadeh, Decision-making in a fuzzy environment, Management Science 17 (1970) 141-164.</p>

<p><a name="hwang">[2]</a> C.L. Hwang; K.P. Yoon, Multiple Attributes Decision Making Methods and Applications, Springer-Verlag, Berlin, 1981.</p>

<p><a name="gomes">[3]</a>¬†L.F.A.M. Gomes, L.A.D. Rangel, An application of the TODIM method to the multicriteria rental evaluation of residential properties, European Journal of Operational Research 193 (2009) 204-211.</p>

<p><a name="krohling">[4]</a> Krohling, Renato A., and Vinicius C. Campanharo. ‚ÄúFuzzy TOPSIS for group decision making: A case study for accidents with oil spill in the sea.‚Äù <i>Expert Systems with Applications</i> 38.4 (2011): 4190-4197.</p>

<p><a name="pacheco">[5]</a> Krohling, Renato A., Andr√© GC Pacheco, and Andr√© LT Siviero. ‚ÄúIF-TODIM: An intuitionistic fuzzy TODIM to multi-criteria decision making.‚Äù <i>Knowledge-Based Systems</i> 53 (2013): 142-146.</p>
:ET